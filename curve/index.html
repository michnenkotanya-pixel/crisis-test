<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç: –ö—Ä–∏–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω | –¢–∞—Ç—å—è–Ω–∞ –ú–∏—Ö–Ω–µ–Ω–∫–æ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
        }

        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
        }

        .checkbox-custom:checked + label {
            background-color: #f5f3ff;
            border-color: #7c3aed;
        }

        .checkbox-custom:checked + label .check-box {
            background-color: #7c3aed;
            border-color: #7c3aed;
        }

        .checkbox-custom:checked + label .check-icon {
            display: block;
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .gradient-bg {
            background: linear-gradient(135deg, #6d28d9 0%, #4f46e5 100%);
        }
    </style>
</head>
<body class="antialiased min-h-screen pb-12">

    <div id="app" class="max-w-xl mx-auto md:mt-8">
        
        <!-- Header -->
        <div class="gradient-bg md:rounded-t-3xl p-8 text-white shadow-lg text-center">
            <h1 class="text-2xl md:text-3xl font-bold mb-3 tracking-tight">–ö—Ä–∏–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω</h1>
            <p class="text-indigo-100 text-sm md:text-base leading-relaxed max-w-md mx-auto">
                –≠—Ç–æ –∫–∞—Ä—Ç–∞ –≤–∞—à–µ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ—é —Ç–æ—á–∫—É, —á—Ç–æ–±—ã –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Ç–æ–Ω—É—Ç—å –≤ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏.
            </p>
        </div>

        <div class="bg-white md:rounded-b-3xl card-shadow overflow-hidden">
            
            <!-- Quiz View -->
            <div id="quiz-container" class="p-6 md:p-10">
                <div class="mb-8 flex items-start p-4 bg-amber-50 rounded-2xl border border-amber-100">
                    <span class="text-xl mr-3 mt-1">üí°</span>
                    <p class="text-sm text-amber-900 leading-snug">
                        –û—Ç–º–µ—á–∞–π—Ç–µ –ø—É–Ω–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–∫–ª–∏–∫–∞—é—Ç—Å—è <strong>—Å–µ–π—á–∞—Å</strong>. –°—á–∏—Ç–∞–π—Ç–µ —ç—Ç–æ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º —Å–Ω–∏–º–∫–æ–º –≤–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
                    </p>
                </div>

                <div id="questions-list" class="space-y-12">
                    <!-- Questions injected by JS -->
                </div>

                <button id="submit-btn" class="w-full mt-12 gradient-bg text-white py-5 rounded-2xl font-bold text-lg hover:shadow-indigo-200 hover:shadow-2xl transition-all active:scale-95">
                    –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                </button>
            </div>

            <!-- Result View -->
            <div id="result-container" class="hidden p-6 md:p-10 fade-in">
                <div class="text-center mb-10">
                    <div class="inline-block px-4 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold uppercase tracking-wider mb-4">
                        –í–∞—à–∞ —Å—Ç–∞–¥–∏—è —Å–µ–π—á–∞—Å
                    </div>
                    <h2 id="result-title" class="text-4xl font-black text-gray-900">...</h2>
                    <p id="result-subtitle" class="text-lg text-indigo-600 mt-2 font-semibold"></p>
                </div>

                <div class="space-y-6 mb-12">
                    <div class="p-6 bg-slate-50 rounded-2xl border-l-4 border-indigo-500">
                        <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">–õ–æ–≤—É—à–∫–∞ —ç—Ç–∞–ø–∞</h3>
                        <p id="result-trap" class="text-gray-800 font-medium leading-relaxed"></p>
                    </div>

                    <div class="p-6 bg-indigo-50 rounded-2xl border-l-4 border-indigo-600">
                        <h3 class="text-xs font-bold text-indigo-400 uppercase tracking-widest mb-2 text-indigo-600">–í–∞—à —à–∞–≥ –Ω–∞ 24 —á–∞—Å–∞</h3>
                        <p id="result-step" class="text-indigo-900 font-bold leading-relaxed whitespace-pre-line text-lg"></p>
                    </div>
                </div>

                <div id="secondary-result" class="hidden mb-10 p-5 bg-orange-50 rounded-2xl border border-orange-100 text-sm text-orange-800 italic">
                    <p>
                        <strong>–ó–∞–º–µ—Ç–∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥?</strong> –£ –≤–∞—Å —Ç–∞–∫–∂–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∞ —Å—Ç–∞–¥–∏—è <span id="secondary-name" class="font-bold underline"></span>. –ù–∞—Ö–æ–¥–∏—Ç—å—Å—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ñ–∞–∑–∞–º–∏ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ —á–∞—Å—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Å–∫–æ—Ä—ã–π —Å–¥–≤–∏–≥.
                    </p>
                </div>

                <!-- Shared Block -->
                <div class="space-y-4 mb-10">
                    <p class="text-center text-sm text-gray-500 px-6">
                        –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —ç—Ç–∏–º —Ç–µ—Å—Ç–æ–º —Å —Ç–µ–º, –∫–æ–º—É —Å–µ–π—á–∞—Å –≤–∞–∂–Ω–æ –Ω–∞–π—Ç–∏ –æ–ø–æ—Ä—É. –ó–Ω–∞–Ω–∏–µ —Å—Ç–∞–¥–∏–∏ —Å–Ω–∏–º–∞–µ—Ç –ø–∞–Ω–∏–∫—É.
                    </p>
                    <a id="share-tg" href="#" target="_blank" class="flex items-center justify-center w-full bg-[#0088cc] text-white py-4 rounded-2xl font-bold transition hover:opacity-95 shadow-lg">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.12.02-1.96 1.25-5.54 3.69-.52.35-1 .53-1.42.52-.47-.01-1.37-.26-2.03-.48-.82-.27-1.47-.42-1.42-.88.03-.24.35-.49.96-.75 3.78-1.65 6.31-2.74 7.58-3.27 3.61-1.51 4.35-1.77 4.84-1.78.11 0 .35.03.5.16.13.12.17.28.18.42z"/></svg>
                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥—Ä—É–≥—É –≤ Telegram
                    </a>
                </div>

                <!-- Consultation -->
                <div class="bg-gray-900 rounded-3xl p-8 text-center text-white">
                    <h4 class="font-bold text-lg mb-2">–ù—É–∂–Ω–∞ –ª–∏—á–Ω–∞—è –ø–æ–º–æ—â—å?</h4>
                    <p class="text-gray-400 text-sm mb-6">–ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ—à–∞–µ—Ç –≤–∞–º –±–æ–ª–µ–µ 2-—Ö –Ω–µ–¥–µ–ª—å, –Ω–µ –∂–¥–∏—Ç–µ –≤—ã–≥–æ—Ä–∞–Ω–∏—è. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –≤–º–µ—Å—Ç–µ.</p>
                    <a id="consult-link" href="#" target="_blank" class="block w-full bg-white text-gray-900 py-4 rounded-2xl font-black text-center transition hover:bg-indigo-50 active:scale-[0.98]">
                        –•–û–ß–£ –ù–ê –ö–û–ù–°–£–õ–¨–¢–ê–¶–ò–Æ
                    </a>
                    <p class="mt-4 text-[10px] uppercase tracking-[0.2em] text-gray-500 font-bold">–¢–∞—Ç—å—è–Ω–∞ –ú–∏—Ö–Ω–µ–Ω–∫–æ | –ü—Å–∏—Ö–æ–ª–æ–≥</p>
                </div>

                <button onclick="location.reload()" class="w-full mt-10 text-gray-400 text-xs font-bold uppercase tracking-widest hover:text-gray-600 transition">
                    –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ
                </button>
            </div>
        </div>
    </div>

    <script>
        const stagesData = [
            {
                id: 'denial',
                name: '–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ',
                sub: '–ò–∑–±–µ–≥–∞—é (‚Äú–≠—Ç–æ –Ω–µ —Å–æ –º–Ω–æ–π‚Äù)',
                items: [
                    '–û—Ç–∫–ª–∞–¥—ã–≤–∞—é –≤—Å—ë –Ω–∞ –ø–æ—Ç–æ–º: "—Å–∞–º–æ —Ä–∞—Å—Å–æ—Å—ë—Ç—Å—è".',
                    '–ó–∞–Ω—è—Ç–∞ —á–µ–º —É–≥–æ–¥–Ω–æ, –ª–∏—à—å –±—ã –Ω–µ –¥—É–º–∞—Ç—å –æ –ø–µ—Ä–µ–º–µ–Ω–∞—Ö.',
                    '–û—â—É—â–µ–Ω–∏–µ —Ç—É–º–∞–Ω–∞, —Å–ª–æ–∂–Ω–æ –ø—Ä–∏–∑–Ω–∞—Ç—å –æ—á–µ–≤–∏–¥–Ω—ã–π —Ñ–∞–∫—Ç.',
                    '–ß–∞—Å—Ç–æ –≥–æ–≤–æ—Ä—é —Å–µ–±–µ: ‚Äú–ø–æ—Ç–æ–º —Ä–∞–∑–±–µ—Ä—É—Å—å‚Äù.'
                ],
                trap: '–ó–∞—Å—Ç—Ä—è—Ç—å –≤ –∏–∑–±–µ–≥–∞–Ω–∏–∏ –∏ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –ø–æ–∑–¥–Ω–æ.',
                step: '–ü—Ä–∏–∑–Ω–∞—Ç—å —Ñ–∞–∫—Ç –±–µ–∑ –¥—Ä–∞–º—ã. –°–∫–∞–∂–∏—Ç–µ: ¬´–§–∞–∫—Ç ‚Äî [—ç—Ç–æ] –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –ú–æ–π —Å–∞–º—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥ —Å–µ–π—á–∞—Å: [—Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ]¬ª.'
            },
            {
                id: 'anger',
                name: '–ì–Ω–µ–≤',
                sub: '–ê—Ç–∞–∫—É—é (‚Äú–ü–æ—á–µ–º—É —è? –ö—Ç–æ –≤–∏–Ω–æ–≤–∞—Ç?!‚Äù)',
                items: [
                    '–ú–µ–Ω—è –≤—Å—ë —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç —Å–∏–ª—å–Ω–µ–µ –æ–±—ã—á–Ω–æ–≥–æ.',
                    '–•–æ—á–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –∏ –æ–±–≤–∏–Ω–∏—Ç—å –≤–∏–Ω–æ–≤–∞—Ç—ã—Ö: ‚Äú—ç—Ç–æ –æ–Ω–∏ –≤—Å—ë –∏—Å–ø–æ—Ä—Ç–∏–ª–∏‚Äù.',
                    '–†–µ–∑–∫–æ—Å—Ç—å –≤ —Å–ø–æ—Ä–∞—Ö, ‚Äú–≤–∑—Ä—ã–≤—ã‚Äù —ç–º–æ—Ü–∏–π –Ω–∞ –ø—É—Å—Ç–æ–º –º–µ—Å—Ç–µ.',
                    '–ú–Ω–æ–≥–æ —Ñ–æ–Ω–æ–≤–æ–π –∑–ª–æ—Å—Ç–∏, –æ–±–∏–¥—ã –∏–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è.'
                ],
                trap: '–°–∂–µ—á—å –≤–∞–∂–Ω—ã–µ –º–æ—Å—Ç—ã –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –≤ –ø–æ—Ä—ã–≤–µ —ç–º–æ—Ü–∏–π.',
                step: '–ü—Ä–∏–∑–Ω–∞—Ç—å –∑–ª–æ—Å—Ç—å –∫–∞–∫ –∑–∞—â–∏—Ç—É —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π. –°–∫–∞–∂–∏—Ç–µ: ¬´–Ø –∑–ª—é—Å—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–Ω–µ –≤–∞–∂–Ω–æ [—ç—Ç–æ]. –°–µ–π—á–∞—Å —è –≤—ã–±–µ—Ä—É —Å–≤–æ—é –≥—Ä–∞–Ω–∏—Ü—É¬ª.'
            },
            {
                id: 'bargain',
                name: '–¢–æ—Ä–≥',
                sub: '–î–æ–≥–æ–≤–∞—Ä–∏–≤–∞—é—Å—å (‚Äú–ê –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫‚Ä¶‚Äù )',
                items: [
                    '–ù–∞–¥–µ–∂–¥–∞: ‚Äú–µ—Å–ª–∏ —è —Å–¥–µ–ª–∞—é –• ‚Äî –≤—Å—ë –≤–µ—Ä–Ω—ë—Ç—Å—è –∫–∞–∫ —Ä–∞–Ω—å—à–µ‚Äù.',
                    '–ú–µ—Ç–∞–Ω–∏—è –º–µ–∂–¥—É –ø–ª–∞–Ω–æ–º –ê, –ë –∏ –ø–æ–∏—Å–∫–æ–º –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞.',
                    '–û—Å—Ç—Ä–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–ª–∏ –≥–æ—Ç–æ–≤–æ–º —Ä–µ—à–µ–Ω–∏–∏.',
                    '–ö–∞—á–µ–ª–∏: –æ—Ç ¬´–≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è¬ª –¥–æ —Å–∏–ª—å–Ω–æ–π —Ç—Ä–µ–≤–æ–≥–∏.'
                ],
                trap: '–ò—Å—Ç–æ—â–∏—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –æ–±–¥—É–º—ã–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.',
                step: '–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –≤—ã–±–æ—Ä. –ü–ª–∞–Ω –Ω–∞ 72 —á–∞—Å–∞: 1. –¢–æ—á–Ω–æ –ù–ï –¥–µ–ª–∞—é [—ç—Ç–æ]. 2. –î–µ–ª–∞—é —Ç–æ–ª—å–∫–æ [–æ–¥–∏–Ω —à–∞–≥].'
            },
            {
                id: 'void',
                name: '–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —è–º–∞',
                sub: '–í—ã–∫–ª—é—á–∞—é—Å—å (‚Äú–ù–µ—Ç —Å–∏–ª, –≤—Å—ë –ø—É—Å—Ç–æ‚Äù)',
                items: [
                    '–û—â—É—â–µ–Ω–∏–µ: ‚Äú–Ω–µ—Ç —Å–∏–ª‚Äù, ‚Äú–Ω–µ —Ö–æ—á—É –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ‚Äù.',
                    '–¢—Ä—É–¥–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –≤—Å—Ç–∞—Ç—å –∏–ª–∏ –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –¥–µ–ª–∞.',
                    '–í—Å—ë –∫–∞–∂–µ—Ç—Å—è –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º –∏–ª–∏ —Å–µ—Ä—ã–º.',
                    '–•–æ—á–µ—Ç—Å—è –ª–µ—á—å, –∑–∞–∫—Ä—ã—Ç—å—Å—è –∏ —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –Ω–µ —Ç—Ä–æ–≥–∞–ª.'
                ],
                trap: '–†–µ—à–∏—Ç—å, —á—Ç–æ —ç—Ç–æ –∫–æ–Ω–µ—Ü –∏–ª–∏ –ª–∏—á–Ω—ã–π –ø—Ä–æ–≤–∞–ª, –∞ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –ø—É—Ç–∏.',
                step: '–†–µ–∂–∏–º ¬´–º–∏–Ω–∏–º—É–º¬ª. –°–æ–Ω, –µ–¥–∞, —Ç–µ–ø–ª–æ, –≤–æ–¥–∞. –ò –≤—Å–µ–≥–æ –æ–¥–Ω–æ –º–∏–∫—Ä–æ-–¥–µ–ª–æ –Ω–∞ 10 –º–∏–Ω—É—Ç (–ª—é–±–æ–µ).'
            },
            {
                id: 'acceptance',
                name: '–ü—Ä–∏–Ω—è—Ç–∏–µ',
                sub: '–î–µ–π—Å—Ç–≤—É—é (‚Äú–û–∫–µ–π, —á—Ç–æ –¥–∞–ª—å—à–µ?‚Äù)',
                items: [
                    '–Ø –ø—Ä–∏–∑–Ω–∞—é: ‚Äú–¥–∞, —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç‚Äù, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ.',
                    '–î—É–º–∞—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ: ‚Äú—á—Ç–æ —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?‚Äù.',
                    '–ù–∞—á–∏–Ω–∞—é –¥–µ–ª–∞—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–µ, –Ω–æ —Ä–µ–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –≤–ø–µ—Ä–µ–¥.',
                    '–í –≥–æ–ª–æ–≤–µ –±–æ–ª—å—à–µ —Å–ø–æ–∫–æ–π–Ω–æ–π —è—Å–Ω–æ—Å—Ç–∏, —á–µ–º –ø–∞–Ω–∏–∫–∏.'
                ],
                trap: '–ü–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º ‚Äî —Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ—Ç —Å–µ–±—è –±—ã—Ç—å —Å–∏–ª—å–Ω–æ–π 24/7.',
                step: '–ü–ª–∞–Ω –æ–ø–æ—Ä—ã –Ω–∞ 3 —Ç–æ—á–∫–∏: 1. –¢–µ–ª–æ (–µ–¥–∞/—Å–æ–Ω). 2. –î–µ–ª–æ (1 –∑–∞–¥–∞—á–∞). 3. –°–≤—è–∑—å (—á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏—Ç).'
            }
        ];

        const listEl = document.getElementById('questions-list');

        stagesData.forEach(stage => {
            const section = document.createElement('div');
            section.className = 'fade-in';
            section.innerHTML = `
                <h3 class="text-xs font-black text-indigo-400 uppercase tracking-[0.2em] mb-4 flex items-center">
                    <span class="w-8 h-0.5 bg-indigo-100 mr-3"></span>
                    ${stage.name}
                </h3>
                <div class="space-y-3">
                    ${stage.items.map((text, i) => `
                        <div>
                            <input type="checkbox" id="${stage.id}-${i}" data-stage="${stage.id}" class="hidden checkbox-custom">
                            <label for="${stage.id}-${i}" class="flex items-start p-5 border border-gray-100 rounded-2xl cursor-pointer hover:border-indigo-200 transition-all active:scale-[0.99] bg-white">
                                <div class="check-box w-6 h-6 border-2 border-gray-100 rounded-lg flex-shrink-0 flex items-center justify-center mr-4 transition-all">
                                    <svg class="check-icon w-3 h-3 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="4"><path d="M5 13l4 4L19 7"></path></svg>
                                </div>
                                <span class="text-gray-600 text-sm md:text-base leading-tight">${text}</span>
                            </label>
                        </div>
                    `).join('')}
                </div>
            `;
            listEl.appendChild(section);
        });

        document.getElementById('submit-btn').onclick = () => {
            const scores = {};
            stagesData.forEach(s => scores[s.id] = 0);

            document.querySelectorAll('.checkbox-custom:checked').forEach(input => {
                scores[input.dataset.stage]++;
            });

            const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const primaryId = sorted[0][0];
            const primaryStage = stagesData.find(s => s.id === primaryId);

            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('result-container').classList.remove('hidden');

            document.getElementById('result-title').innerText = primaryStage.name;
            document.getElementById('result-subtitle').innerText = primaryStage.sub;
            document.getElementById('result-trap').innerText = primaryStage.trap;
            document.getElementById('result-step').innerText = primaryStage.step;

            if (sorted[0][1] > 0 && sorted[0][1] === sorted[1][1]) {
                const secondary = stagesData.find(s => s.id === sorted[1][0]);
                document.getElementById('secondary-result').classList.remove('hidden');
                document.getElementById('secondary-name').innerText = secondary.name;
            }

            // Links
            const siteUrl = window.location.href;
            const resText = `–ú–æ—è —Å—Ç–∞–¥–∏—è –ø–æ –ö—Ä–∏–≤–æ–π –ü–µ—Ä–µ–º–µ–Ω: ${primaryStage.name}. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç, –µ—Å–ª–∏ —Å–µ–π—á–∞—Å –Ω–µ–ø—Ä–æ—Å—Ç–æ: `;
            document.getElementById('share-tg').href = `https://t.me/share/url?url=${encodeURIComponent(siteUrl)}&text=${encodeURIComponent(resText)}`;
            
            const msg = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ø—Ä–æ—à–µ–ª(–ª–∞) —Ç–µ—Å—Ç –ø–æ –ö—Ä–∏–≤–æ–π –ü–µ—Ä–µ–º–µ–Ω. –ú–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Å—Ç–∞–¥–∏—è ${primaryStage.name}. –•–æ—á—É –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é.`;
            document.getElementById('consult-link').href = `https://t.me/Tatyana_Michnenko?text=${encodeURIComponent(msg)}`;

            window.scrollTo({ top: 0, behavior: 'smooth' });
        };
    </script>
</body>
</html>
